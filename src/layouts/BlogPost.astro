---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';
import { PROFILE_NAME } from '../consts';

type Props = CollectionEntry<'personal'>['data'] | CollectionEntry<'technology'>['data'] | CollectionEntry<'academics'>['data'] | CollectionEntry<'now'>['data'];

const { title, description, date, cover, tags } = Astro.props;
---

<html lang="en">
	<head>
		<BaseHead
			title={title}
			description={description}
			image={cover}
			ogType="article"
			publishedTime={date}
			author={PROFILE_NAME}
			tags={tags}
		/>
	</head>

	<body>
		<Header />
		<main class="w-full max-w-3xl mx-auto px-4 py-8">
			<article>
				<!-- Back Button -->
				<div class="mb-6">
					<a href="javascript:history.back()" class="inline-flex items-center text-black hover:underline font-bold text-sm uppercase tracking-wide">
						<svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M15 19l-7-7 7-7"></path>
						</svg>
						Back
					</a>
				</div>

				<!-- Cover Image -->
				{cover && (
					<div class="mb-6">
						<Image
							width={1020}
							height={510}
							src={cover}
							alt=""
							class="w-full h-auto border-4 border-black shadow-[8px_8px_0px_0px_#000]"
						/>
					</div>
				)}

				<!-- Post Content Box -->
				<div class="bg-white border-4 border-black shadow-[8px_8px_0px_0px_#000] p-6 md:p-10">
					<!-- Post Header -->
					<header class="mb-10 pb-8 border-b-2 border-black">
						<h3 class="text-3xl md:text-4xl font-black text-black mb-3 leading-tight">{title}</h3>
						<time class="text-sm text-gray-600 uppercase tracking-wide block mb-4">
							{new Date(date.getTime() + date.getTimezoneOffset() * 60000).toLocaleDateString('en-US', {
								year: 'numeric',
								month: 'long',
								day: 'numeric',
								timeZone: 'PST'
							})}
						</time>

						{tags && tags.length > 0 && (
							<div class="flex flex-wrap gap-2">
								{tags.map((tag) => (
									<span class="inline-block bg-black text-white px-3 py-1 text-xs font-bold uppercase tracking-wide">
										{tag}
									</span>
								))}
							</div>
						)}
					</header>

					<!-- Post Body -->
					<div class="prose prose-lg prose-gray max-w-none
						prose-headings:font-black prose-headings:text-black prose-headings:mt-8 prose-headings:mb-4
						prose-h2:text-2xl prose-h2:mt-12 prose-h2:mb-6
						prose-h3:text-xl prose-h3:mt-8 prose-h3:mb-4
						prose-p:mb-6 prose-p:leading-relaxed prose-p:text-gray-800
						prose-a:text-blue-600 prose-a:font-bold prose-a:no-underline hover:prose-a:underline
						prose-strong:font-bold prose-strong:text-black
						prose-ul:my-6 prose-ul:space-y-2 prose-li:text-gray-800
						prose-ol:my-6 prose-ol:space-y-2
						prose-blockquote:border-l-4 prose-blockquote:border-black prose-blockquote:pl-4 prose-blockquote:italic prose-blockquote:my-6
						prose-code:bg-gray-100 prose-code:px-1 prose-code:py-0.5 prose-code:rounded prose-code:text-sm prose-code:font-mono prose-code:before:content-[''] prose-code:after:content-['']
						prose-pre:bg-gray-900 prose-pre:text-gray-100 prose-pre:p-4 prose-pre:rounded-none prose-pre:border-4 prose-pre:border-black prose-pre:shadow-[4px_4px_0px_0px_#000] prose-pre:my-6
						prose-img:border-4 prose-img:border-black prose-img:shadow-[8px_8px_0px_0px_#000] prose-img:my-8 prose-img:w-full
						prose-hr:border-t-2 prose-hr:border-black prose-hr:my-8">
						<slot />
					</div>
				</div>
			</article>
		</main>
		<Footer />
	</body>
</html>